# koishi-plugin-ban-words

> 纯净：**不把关键词写进 koishi.yml**。本插件从 **TXT 文件**读取违规词库（每行一个）。适合几千/上万关键词的场景。

## 功能
- 从 **外部 TXT** 加载词库，热重载（保存文件后自动生效）
- 匹配模式：**普通子串** / **正则**（可选），可 **忽略大小写**
- 命中后可：**撤回**原消息（需平台权限）并 **阻断**后续插件
- 支持设定**提示语**（随机抽一条回复）
- 提供命令：`banwords.reload` 手动重载词库

## 安装
### 插件市场
在 Koishi 控制台搜索 **koishi-plugin-ban-words** 安装。

### npm（适用于开发）
```bash
npm i koishi-plugin-ban-words
```

## 配置项
- **dictPath** (必填)：TXT 词库文件的绝对路径或相对 Koishi 工作目录的路径。**一行一个词**；空行与以 `#` 开头的行会被忽略。
- **useRegex**：将每一行视为正则表达式。默认 false（普通子串匹配）。
- **ignoreCase**：忽略大小写。默认 true。
- **recallOnHit**：命中后尝试撤回该消息。默认 false（需平台/机器人具备撤回权限）。
- **blockOnHit**：命中后阻断后续中间件。默认 true。
- **replyHints**：命中时用于提示的文案数组；随机选择一条回复（可留空）。
- **watch**：监听词库文件变更并热重载。默认 true。

> 词库行内可写空格；若 **useRegex=false**，会按原文做子串匹配。若 **useRegex=true**，请自行转义特殊字符。

## 词库 TXT 示例
```
# 以 # 开头的为注释
赌钱
外挂
(?<!好)色  # 如果使用正则，可以在行末写注释（# 之后会被忽略）
```
> 默认会把每一行 `#` 及其右侧视作注释去掉（正则行同样如此）。若你确实需要 `#` 作为匹配内容，请在其前面加反斜杠 `\#` 并开启 **useRegex=true**。

## 命令
- `banwords.reload`：立刻重载词库。


## 变更日志
- 1.2.0 修复 npm 包结构，新增 TXT 词库热重载、命令重载、批量正则。

## 许可证
MIT